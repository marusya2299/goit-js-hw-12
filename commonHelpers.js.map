{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["'use strict';\n\nimport axios from 'axios';\n\nconst API_KEY = '43475453-62a6130baf5d53b90b99f069a';\nconst BASE_URL = 'https://pixabay.com/api/';\n\nexport async function imagesSearch(input = \"\", page = 1, perPage = 15) {\n    const params = new URLSearchParams({\n        key: API_KEY,\n        q: input,\n        image_type: \"photo\",\n        orientation: \"hotizontal\",\n        safesearch: true,\n        page: page,\n        per_page: perPage\n    })\n\n    try{\n        const response = await axios.get(`${BASE_URL}?${params.toString()}`);\n        if (response.status !== 200) {\n            throw new Error('Failed to fetch images');\n        }\n        return response.data;\n    }\n    catch (error){\n        throw new Error('Failed to fetch images');\n    }\n}","'use strict';\n\nexport function createGallery(images, gallery) {\n    const galleryHTML = images.map(image => `\n        <li class=\"gallery-item\">\n            <a href=\"${image.largeImageURL}\" class=\"gallery-link\">\n                <img src=\"${image.webformatURL}\" alt=\"${image.tags}\" class=\"gallery-image\">\n                <div class=\"description\">\n                    <div class=\"field\">\n                        <span class=\"label\">Likes</span>\n                        <span class=\"value\" data-likes>${image.likes}</span>\n                    </div>\n                    <div class=\"field\">\n                        <span class=\"label\">Views</span>\n                        <span class=\"value\" data-views>${image.views}</span>\n                    </div>\n                    <div class=\"field\">\n                        <span class=\"label\">Comments</span>\n                        <span class=\"value\" data-comments>${image.comments}</span>\n                    </div>\n                    <div class=\"field\">\n                        <span class=\"label\">Downloads</span>\n                        <span class=\"value\" data-downloads>${image.downloads}</span>\n                    </div>\n                </div>\n            </a>\n        </li>\n    `).join('');\n\n    gallery.insertAdjacentHTML('beforeend', galleryHTML);\n    return gallery;\n}\n","'use strict';\n\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nimport { imagesSearch } from './js/pixabay-api.js';\nimport { createGallery } from './js/render-functions.js';\n\nconst form = document.querySelector(\".form\");\nconst input = document.querySelector(\".input\");\nconst gallery = document.querySelector(\".gallery\");\nconst lightbox = new SimpleLightbox('.gallery a', {\n    captions: true,\n    captionDelay: 250,\n    captionPosition: 'bottom',\n    captionType: 'attr',\n    captionsData: 'alt'\n});\n\nconst loader = document.querySelector(\".loader\");\nconst buttonLoad = document.querySelector(\".load-button\");\n\nlet page = 1;\nlet currentKeyWord = '';\n\nfunction displayLoader(display) {\n    loader.style.display = display ? 'block' : 'none';\n}\n\nfunction displayLoadButton(display) {\n    buttonLoad.style.display = display ? 'block' : 'none';\n}\n\nasync function loadImages(keyword, pageNumber = 1) {\n    displayLoader(true);\n    try {\n        const data = await imagesSearch(keyword, pageNumber);\n        if (data.totalHits === 0) {\n            iziToast.error({\n                message: 'Sorry, there are no images matching your search query. Please try again!',\n                messageColor: 'rgba(250, 250, 251, 1)',\n                icon: 'myIcon',\n                iconColor: 'rgba(250, 250, 251, 1)',\n                color: 'rgba(239, 64, 64, 1)',\n                position: 'topRight',\n                progressBarColor: 'rgba(181, 27, 27, 1)'\n            });\n            return;\n        }\n        else if(page * 15 >= data.totalHits) {\n                displayLoadButton(false);\n                iziToast.error({\n                message: 'We are sorry, but you have reached the end of search results',\n                messageColor: 'rgba(250, 250, 251, 1)',\n                icon: 'myIcon',\n                iconColor: 'rgba(250, 250, 251, 1)',\n                color: 'rgba(239, 64, 64, 1)',\n                position: 'topRight',\n                progressBarColor: 'rgba(181, 27, 27, 1)'\n            });\n        }\n        else {\n            displayLoadButton(true);\n        }\n\n        createGallery(data.hits, gallery);\n        lightbox.refresh();\n        page++;\n         scroll();\n    } catch (error) {\n        iziToast.error({ message: 'Failed to fetch images. Please try again!' });\n    } finally {\n        displayLoader(false);\n    }\n}\n\nfunction formSubmit(event) {\n    event.preventDefault();\n    const keyword = input.value.trim();\n\n    if (!keyword) {\n        iziToast.warning({ message: 'The name is incorrect. Please try again' });\n        return;\n    }\n\n    if (currentKeyWord !== keyword) {\n        currentKeyWord = keyword;\n        page = 1;\n        gallery.innerHTML = '';\n    }\n\n    loadImages(keyword);\n    input.value = '';\n    gallery.innerHTML = '';\n}\n\nfunction loadMore(event) {\n    event.preventDefault();\n    loadImages(currentKeyWord, page);\n}\n\nfunction scroll() {\n    const card = document.querySelector(\".gallery-item\");\n    if (page === 2) return;\n    const cardHeight = card.offsetHeight;\n        window.scrollBy({\n        top: cardHeight*2, \n        behavior: 'smooth'\n    });\n}\n\nform.addEventListener('submit', formSubmit);\nbuttonLoad.addEventListener('click', loadMore);\n"],"names":["API_KEY","BASE_URL","imagesSearch","input","page","perPage","params","response","axios","createGallery","images","gallery","galleryHTML","image","form","lightbox","SimpleLightbox","loader","buttonLoad","currentKeyWord","displayLoader","display","displayLoadButton","loadImages","keyword","pageNumber","data","iziToast","scroll","formSubmit","event","loadMore","card","cardHeight"],"mappings":"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"}